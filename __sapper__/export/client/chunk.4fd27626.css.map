{
  "version": 3,
  "file": "chunk.4fd27626.css",
  "sources": [
    "../../../../../../src/routes/index.html"
  ],
  "sourcesContent": [
    "<svelte:head>\r\n\t<title>Calculadora</title>\r\n</svelte:head>\r\n\r\n<div class=\"dock\">\r\n\t<button class=\"badge\" on:click=\"add(true)\" data-count={normais}><span class=\"icon ion-md-checkmark-circle success\"></span></button>\r\n\t<button class=\"badge\" on:click=\"add(false)\" data-count={fechadas}><span class=\"icon ion-md-close-circle warning\"></span></button>\r\n\t<button on:click=\"config()\"><span class=\"icon ion-md-cog\"></span></button>\r\n</div>\r\n\r\n<div class={showConfig}>\r\n\t<h1>Configurações</h1>\r\n\r\n\t<p><strong>Calculadora de Horas ACE <i>v3.2.2.</i></strong></p>\r\n\r\n\t{#if normais != 0}<p>Tempo médio por Vistoria N: {media}</p>{/if}\r\n\r\n\t<div class=\"container\">\r\n\t\t<div>\r\n\t\t\t<fieldset>\r\n\t\t\t\t<legend>Manhã</legend>\r\n\t\t\t\t<label>Ativado\r\n\t\t\t\t\t<input type=\"checkbox\" bind:checked=manha.ativado>\r\n\t\t\t\t</label>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t\t<div class=\"container\">\r\n\t\t\t\t\t<label>Início:</label>\r\n\t\t\t\t\t<input type=\"time\" bind:value=manha.inicio>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br>\r\n\t\t\t\t<div class=\"container\">\r\n\t\t\t\t\t<label>Fim:</label>\r\n\t\t\t\t\t<input type=\"time\" bind:value=manha.fim>\r\n\t\t\t\t</div>\r\n\t\t\t</fieldset>\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<fieldset>\r\n\t\t\t\t<legend>Tarde</legend>\r\n\t\t\t\t<label>Ativado\r\n\t\t\t\t\t<input type=\"checkbox\" bind:checked=tarde.ativado>\r\n\t\t\t\t</label>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t\t<div class=\"container\">\r\n\t\t\t\t\t<label>Início:</label>\r\n\t\t\t\t\t<input type=\"time\" bind:value=tarde.inicio>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br>\r\n\t\t\t\t<div class=\"container\">\r\n\t\t\t\t\t<label>Fim:</label>\r\n\t\t\t\t\t<input type=\"time\" bind:value=tarde.fim>\r\n\t\t\t\t</div>\r\n\t\t\t</fieldset>\r\n\t\t</div>\r\n\t</div>\r\n\t{#if !(manha.ativado || tarde.ativado)}\r\n\t<p class=warning-msg>Erro. Não há período ativo. Ative ao menos um dos períodos.</p>\r\n\t{/if}\r\n</div>\r\n\r\n\r\n<div class={showContent}>\r\n\t<table>\r\n\t\t<tr>\r\n\t\t\t<th>Linha</th>\r\n\t\t\t<th>Tipo</th>\r\n\t\t\t<th>Hora</th>\r\n\t\t\t<th>Excluir</th>\r\n\t\t</tr>\r\n\t\t{#each vistorias as vistoria}\r\n\t\t<tr transition:fade>\r\n\t\t\t<td>{vistorias.findIndex(obj => obj.id == vistoria.id)+1}</td>\r\n\t\t\t<td>\r\n\t\t\t\t{#if vistoria.normal}\r\n\t\t\t\t<button class=\"icon ion-md-checkmark-circle success\" on:click='change(vistoria.id)'></button>\r\n\t\t\t\t{:else}\r\n\t\t\t\t<button class=\"icon ion-md-close-circle warning\" on:click='change(vistoria.id)'></button>\r\n\t\t\t\t{/if}\r\n\t\t\t</td>\r\n\t\t\t<td>{vistoria.hora}</td>\r\n\t\t\t<td><button class=\"icon ion-md-trash\" on:click='remove(vistoria.id)'></button></td>\r\n\t\t</tr>\r\n\t\t{/each}\r\n\t</table>\r\n</div>\r\n\r\n\r\n<script>\r\n\timport { fade } from 'svelte-transitions';\r\n\r\n\tfunction media(vistorias, manha, tarde) {\r\n\t  let normais = vistorias.filter(obj => obj.normal).length;\r\n\t  let fechadas = vistorias.filter(obj => !obj.normal).length;\r\n\t  return Math.trunc(\r\n\t    (totalDuration(manha, tarde) - fechadas * 2) / (normais - 1)\r\n\t  );\r\n\t}\r\n\r\n\tfunction timeObjAsStr(time) {\r\n\t  time.h = String(time.h).padStart(2, \"0\");\r\n\t  time.m = String(time.m).padStart(2, \"0\");\r\n\t  return `${time.h}:${time.m}`;\r\n\t}\r\n\r\n\tfunction timeStrAsObj(time) {\r\n\t  let [hours, minutes] = time.split(\":\");\r\n\t  return { h: Number(hours), m: Number(minutes) };\r\n\t}\r\n\r\n\tfunction timeDiff(time, duration) {\r\n\t  time = timeStrAsObj(time);\r\n\t  if (time.m + duration >= 60) {\r\n\t    let hours = Math.trunc((time.m + duration) / 60);\r\n\t    time.h += hours;\r\n\t\t\ttime.m = time.m + duration - hours * 60;\r\n\t\t\t// console.log(`Avançou: ${time.h}:${time.m}`);\r\n\t\t} else if (time.m + duration < 0) {\r\n\t\t\ttime.h -= 1;\r\n\t\t\ttime.m = 60 + duration;\r\n\t\t\t// console.log(`Retornou: ${time.h}:${time.m}`);\r\n\t  } else {\r\n\t\t\ttime.m += duration;\r\n\t\t\t// console.log(`Normal: ${time.h}:${time.m}`);\r\n\t  }\r\n\t  return timeObjAsStr(time);\r\n\t}\r\n\r\n\tfunction getDuration(start, finish) {\r\n\t  start = timeStrAsObj(start);\r\n\t  finish = timeStrAsObj(finish);\r\n\t  // returns the duration in minutes between start and finish.\r\n\t  return (finish.h - (start.h + 1)) * 60 + (60 - start.m) + finish.m;\r\n\t}\r\n\r\n\tfunction totalDuration(manha, tarde) {\r\n\t  let durationManha = getDuration(manha.inicio, manha.fim);\r\n\t  let durationTarde = getDuration(tarde.inicio, tarde.fim);\r\n\t  let minutos = 0;\r\n\t  if (manha.ativado && tarde.ativado) {\r\n\t    minutos = durationManha + durationTarde;\r\n\t  } else if (manha.ativado && !tarde.ativado) {\r\n\t    minutos = durationManha;\r\n\t  } else if (!manha.ativado && tarde.ativado) {\r\n\t    minutos = durationTarde;\r\n\t  }\r\n\t  return minutos;\r\n\t}\r\n\r\n\t// Aleatoriedade dos horários (entre n-1 e n+1).\r\n\tfunction randomize(time) {\r\n\t  let diff = Math.trunc(Math.random() * 3) - 1;\r\n\t  return timeDiff(time, diff);\r\n\t}\r\n\r\n\tfunction horaInicio(manha, tarde) {\r\n\t  if (manha.ativado) {\r\n\t    return manha.inicio;\r\n\t  } else if (tarde.ativado) {\r\n\t    return tarde.inicio;\r\n\t  } else {\r\n\t    return \"00:00\";\r\n\t  }\r\n\t}\r\n\r\n\tfunction horaSaida(manha, tarde, hora) {\r\n\t  hora = timeStrAsObj(hora);\r\n\t  if (manha.ativado && tarde.ativado) {\r\n\t    let manhaFim = timeStrAsObj(manha.fim);\r\n\t    let tardeInicio = timeStrAsObj(tarde.inicio);\r\n\t    if (hora.h >= manhaFim.h && hora.m > manhaFim.m && hora.h < tardeInicio.h) {\r\n\t      return tarde.inicio;\r\n\t    } else {\r\n\t      return timeObjAsStr(hora);\r\n\t    }\r\n\t  } else {\r\n\t    return timeObjAsStr(hora);\r\n\t  }\r\n\t}\r\n\r\n\tfunction update(vistorias, manha, tarde) {\r\n\t  let mediaNormal = media(vistorias, manha, tarde);\r\n\t  if (vistorias.length > 0) {\r\n\t    let atual = randomize(horaInicio(manha, tarde));\r\n\t    vistorias = vistorias.map(vistoria => {\r\n\t      vistoria.hora = atual;\r\n\t      if (vistoria.normal) {\r\n\t        atual = randomize(\r\n\t          horaSaida(manha, tarde, timeDiff(atual, mediaNormal))\r\n\t        );\r\n\t      } else {\r\n\t        atual = randomize(horaSaida(manha, tarde, timeDiff(atual, 2)));\r\n\t      }\r\n\t      return vistoria;\r\n\t    });\r\n\t  }\r\n\t  return vistorias;\r\n\t}\r\n\r\n\texport default {\r\n\t\ttransitions: { fade },\r\n\t  data() {\r\n\t    return {\r\n\t      config: false,\r\n\t      vistorias: [],\r\n\t      manha: {\r\n\t        ativado: true,\r\n\t        inicio: \"08:40\",\r\n\t        fim: \"11:20\"\r\n\t      },\r\n\t      tarde: {\r\n\t        ativado: true,\r\n\t        inicio: \"14:30\",\r\n\t        fim: \"17:20\"\r\n\t      }\r\n\t    };\r\n\t  },\r\n\t  helpers: {},\r\n\t  computed: {\r\n\t    showConfig: ({ config }) => (config ? \"show\" : \"hide\"),\r\n\t    showContent: ({ config }) => (!config ? \"show\" : \"hide\"),\r\n\t    normais: ({ vistorias }) => vistorias.filter(obj => obj.normal).length,\r\n\t    fechadas: ({ vistorias }) =>\r\n\t      vistorias.filter(obj => obj.normal == false).length,\r\n\t    media: ({ vistorias, manha, tarde }) => media(vistorias, manha, tarde),\r\n\t    update: ({ vistorias, manha, tarde }) => update(vistorias, manha, tarde)\r\n\t  },\r\n\t  methods: {\r\n\t    config() {\r\n\t      const { config, vistorias, manha, tarde } = this.get();\r\n\r\n\t      if (config) {\r\n\t        this.set({ config: false });\r\n\t      } else {\r\n\t        this.set({ config: true });\r\n\t      }\r\n\t      this.set({ vistorias: vistorias });\r\n\t    },\r\n\r\n\t    add(type) {\r\n\t      const { config, vistorias, manha, tarde } = this.get();\r\n\r\n\t      let horaEntrada = horaInicio(manha, tarde);\r\n\t      if (vistorias.length > 0) {\r\n\t        let vistoriaAnterior = vistorias[vistorias.length - 1];\r\n\t        if (vistoriaAnterior.normal) {\r\n\t          horaEntrada = timeDiff(vistoriaAnterior.hora, 15);\r\n\t        } else {\r\n\t          horaEntrada = timeDiff(vistoriaAnterior.hora, 2);\r\n\t        }\r\n\t      }\r\n\r\n\t      // Registra a vistoria\r\n\t      this.set({\r\n\t        vistorias: vistorias.concat({\r\n\t          id: vistorias.length,\r\n\t          normal: type,\r\n\t          hora: horaEntrada\r\n\t        })\r\n\t      });\r\n\t    },\r\n\r\n\t    change(id) {\r\n\t      const { config, vistorias, ..._ } = this.get();\r\n\t      this.set({\r\n\t        vistorias: vistorias.map(vistoria => {\r\n\t          if (vistoria.id == id) {\r\n\t            vistoria.normal = !vistoria.normal;\r\n\t          }\r\n\t          return vistoria;\r\n\t        })\r\n\t      });\r\n\t    },\r\n\r\n\t    remove(id) {\r\n\t      const { config, vistorias, ..._ } = this.get();\r\n\r\n\t      this.set({\r\n\t        vistorias: vistorias.filter(obj => obj.id != id)\r\n\t      });\r\n\t    }\r\n\t  }\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\tbutton {\r\n\t  background-color: transparent;\r\n\t  border: none;\r\n\t}\r\n\r\n\ttable {\r\n\t  width: 100%;\r\n\t  border-collapse: collapse;\r\n\t  margin-bottom: 80px;\r\n\t}\r\n\r\n\tth {\r\n\t  font-size: 1.3em;\r\n\t}\r\n\r\n\ttr {\r\n\t  border-bottom: 5px solid white;\r\n\t}\r\n\r\n\ttd {\r\n\t  text-align: center;\r\n\t  vertical-align: middle;\r\n\t  background-color: #f6f6f6;\r\n\t  font-size: 1.4em;\r\n\t}\r\n\r\n\t.hide {\r\n\t  display: none;\r\n\t}\r\n\r\n\t.show {\r\n\t  display: block;\r\n\t}\r\n\r\n\tdiv > .icon,\r\n\tbutton > .icon {\r\n\t  font-size: 62px;\r\n\t}\r\n\r\n\ttd > .icon {\r\n\t  font-size: 1.2em;\r\n\t}\r\n\r\n\t.center {\r\n\t  text-align: center;\r\n\t}\r\n\r\n\tbutton {\r\n\t  margin: 0px 10px 0px 10px;\r\n\t  vertical-align: middle;\r\n\t\ttouch-action: manipulation;\r\n\t}\r\n\r\n\t.success {\r\n\t  color: #32b643;\r\n\t}\r\n\r\n\t.warning {\r\n\t  color: #e85600;\r\n\t}\r\n\r\n\t.warning-msg {\r\n\t  padding: 20px;\r\n\t  background-color: #e85600;\r\n\t  color: white;\r\n\t  font-weight: 700;\r\n\t  border-radius: 5px;\r\n\t}\r\n\r\n\t.dock {\r\n\t  position: fixed;\r\n\t  bottom: 0px;\r\n\t  right: 0px;\r\n\t  left: 0px;\r\n\t  background-color: white;\r\n\t  text-align: center;\r\n\t  -webkit-box-shadow: 0px -5px 70px 0px rgba(74, 74, 74, 0.75);\r\n\t  -moz-box-shadow: 0px -5px 70px 0px rgba(74, 74, 74, 0.75);\r\n\t  box-shadow: 0px -5px 70px 0px rgba(74, 74, 74, 0.75);\r\n\t}\r\n\r\n\tlegend {\r\n\t  font-size: 1.4em;\r\n\t}\r\n\r\n\t/* Button Badge */\r\n\tbutton.badge {\r\n\t  position: relative;\r\n\t}\r\n\r\n\tbutton.badge:before {\r\n\t  content: attr(data-count);\r\n\t  width: 20px;\r\n\t  height: 20px;\r\n\t  line-height: 20px;\r\n\t  text-align: center;\r\n\t  display: block;\r\n\t  border-radius: 50%;\r\n\t  background: rgb(67, 151, 232);\r\n\t  border: 1px solid #ddd;\r\n\t  color: #fff;\r\n\t  position: absolute;\r\n\t  bottom: 10px;\r\n\t  right: 4px;\r\n\t}\r\n</style>"
  ],
  "names": [],
  "mappings": "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"
}